<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Join Classroom</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="./../../materialize.min.css">
<link rel="stylesheet" href="./../../stylee.css">
<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Flag_of_Tanzania.svg/1920px-Flag_of_Tanzania.svg.png');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    color: white;
}
.header-bar {
    background-color: rgba(0,85,77,0.9);
    padding: 10px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.header-bar div { margin: 0 10px; }
.main-wrap { margin-top: 20px; display:flex; justify-content:center; align-items:center; height:70vh; }
.join-meeting, .host-meeting {
    display:flex;
    justify-content:center;
    align-items:center;
    background-color:#00554d;
    height:50px;
    width:200px;
    font-size:20px;
    color:white;
    border-radius:5px;
    cursor:pointer;
    margin:10px;
}
@media screen and (max-width:600px){
    .header-bar { flex-direction:column; text-align:center; }
}
</style>
</head>
<body>

<div class="header-bar">
    <div style="font-weight:bold;">TPSC Video Classroom Session</div>
    <div class="info-group">
        <div id="clock"></div>
        <div id="day"></div>
        <div id="ip"></div>
        <div id="location"></div>
    </div>
</div>

<div class="main-wrap">
    <div class="join-meeting">Join Classroom</div>
    <div class="host-meeting">Host Classroom</div>
</div>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
function updateTime(){
    const now=new Date();
    $("#clock").text(`Time: ${now.toLocaleTimeString()}`);
    $("#day").text(`Date: ${now.toLocaleDateString(undefined,{ weekday:'long', year:'numeric', month:'long', day:'numeric'})}`);
}
setInterval(updateTime,1000); updateTime();

fetch('https://ipapi.co/json/').then(res=>res.json()).then(data=>{
    $("#ip").text(`IP: ${data.ip}`);
    $("#location").text(`Location: ${data.city}, ${data.country_name}`);
});

$(function(){
    function goToMeeting(meetingID){
        const uid = prompt('Enter your nickname!');
        if(!uid) return;
        const url = `/appHome?meetingID=${meetingID}&uid=${encodeURIComponent(uid)}`;
        window.location.href = url;
    }

    $(document).on('click','.join-meeting',function(){
        const meetingID = prompt('Enter Meeting ID to join:');
        if(meetingID) goToMeeting(meetingID.trim());
    });

    $(document).on('click','.host-meeting',function(){
        const meetingID = Math.floor(Math.random()*100000000);
        goToMeeting(meetingID);
    });
});
</script>

</body>
</html>
